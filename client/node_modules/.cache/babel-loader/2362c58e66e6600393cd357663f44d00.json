{"ast":null,"code":"var _jsxFileName = \"/home/phuocnghia712/Desktop/Cshttt/client/src/components/checkout/checkout.js\";\nimport React, { useContext, useState, useEffect } from 'react';\nimport { useLocation, useParams } from 'react-router';\nimport { GlobalState } from '../../GlobalState';\nimport PaypaylExpressBtn from 'react-paypal-express-checkout';\nimport PaypalButton from '../mainpages/cart/PaypalButton';\nimport axios from 'axios';\nimport CS from \"../../img/chinhsach.svg\";\nimport payment from \"../../img/payment.svg\";\nimport CS2 from \"../../img/insurance2.svg\";\nimport bag from \"../../img/bag.svg\";\nimport { Link } from 'react-router-dom';\nimport left from \"../../img/left.svg\";\nimport { store } from 'react-notifications-component';\nimport Footer from '../footer/Footer';\nconst initialState = {\n  shipname: '',\n  shipaddress: '',\n  shipcity: '',\n  shipstate: '',\n  shipphone: ''\n};\n\nfunction Checkout() {\n  const state = useContext(GlobalState);\n  const [cart, setCart] = state.userAPI.cart;\n  const [ship, setShip] = useState({\n    initialState\n  });\n  const {\n    shipname,\n    shipaddress,\n    shipcity,\n    shipstate,\n    shipphone\n  } = ship;\n  const [total, setTotal] = useState(0);\n  const [token] = state.token;\n\n  const addToCart = async cart => {\n    await axios.patch('/user/addcart', {\n      cart\n    }, {\n      headers: {\n        Authorization: token\n      }\n    });\n  };\n\n  const tranSuccess = async payment => {\n    const {\n      paymentID,\n      address\n    } = payment;\n    const pay = total / 2;\n    await axios.post('/api/payment', {\n      cart,\n      paymentID,\n      address,\n      shipname,\n      shipaddress,\n      shipcity,\n      shipstate,\n      shipphone,\n      pay,\n      total\n    }, {\n      headers: {\n        Authorization: token\n      }\n    });\n    setCart([]);\n    addToCart([]);\n    store.addNotification({\n      title: \"SuccessFul Payment!\",\n      message: \"Please check your history order!\",\n      type: \"success\",\n      insert: \"top\",\n      container: \"top-center\",\n      animationIn: [\"animate__animated\", \"animate__fadeIn\"],\n      animationOut: [\"animate__animated\", \"animate__fadeOut\"],\n      dismiss: {\n        duration: 2500,\n        onScreen: true\n      }\n    });\n    window.location.href = \"/history\";\n  }; //get total of cart\n\n\n  useEffect(() => {\n    const getTotal = () => {\n      const total = cart.reduce((prev, item) => {\n        return prev + item.price * item.quantity;\n      }, 0);\n      setTotal(total);\n    };\n\n    getTotal();\n  }, [cart]);\n\n  const onChangeInput = e => {\n    const {\n      name,\n      value\n    } = e.target;\n    setShip({ ...ship,\n      [name]: value\n    });\n    console.log(ship);\n  };\n\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: \"checkout\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 83,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"inforcheckout\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 84,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"shipping\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 85,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"shipform\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 86,\n      columnNumber: 21\n    }\n  }, /*#__PURE__*/React.createElement(\"h3\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 87,\n      columnNumber: 25\n    }\n  }, \"Shipping Address\"), /*#__PURE__*/React.createElement(\"input\", {\n    className: \"shipinfor\",\n    id: \"shipinfor\",\n    type: \"text\",\n    name: \"shipname\",\n    value: ship.shipname,\n    onChange: onChangeInput,\n    required: true,\n    placeholder: \"Reciver fullname\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 88,\n      columnNumber: 25\n    }\n  }), /*#__PURE__*/React.createElement(\"input\", {\n    className: \"shipinfor\",\n    type: \"text\",\n    name: \"shipaddress\",\n    value: ship.shipaddress,\n    onChange: onChangeInput,\n    required: true,\n    placeholder: \"Address\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 91,\n      columnNumber: 25\n    }\n  }), /*#__PURE__*/React.createElement(\"input\", {\n    className: \"shipinfor\",\n    type: \"text\",\n    name: \"shipcity\",\n    value: ship.city,\n    onChange: onChangeInput,\n    required: true,\n    placeholder: \"City\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 94,\n      columnNumber: 25\n    }\n  }), /*#__PURE__*/React.createElement(\"input\", {\n    className: \"shipinfor\",\n    type: \"text\",\n    name: \"shipstate\",\n    value: ship.shipstate,\n    onChange: onChangeInput,\n    required: true,\n    placeholder: \"State\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 97,\n      columnNumber: 25\n    }\n  }), /*#__PURE__*/React.createElement(\"input\", {\n    className: \"shipinfor\",\n    type: \"text\",\n    name: \"shipphone\",\n    value: ship.shipphone,\n    onChange: onChangeInput,\n    required: true,\n    placeholder: \"Reciver phonenumber\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 100,\n      columnNumber: 25\n    }\n  }))), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"Confirm\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 103,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(\"img\", {\n    className: \"img\",\n    src: CS,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 104,\n      columnNumber: 21\n    }\n  }), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"text\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 105,\n      columnNumber: 21\n    }\n  }, /*#__PURE__*/React.createElement(\"h4\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 107,\n      columnNumber: 25\n    }\n  }, /*#__PURE__*/React.createElement(\"img\", {\n    className: \"icon\",\n    src: payment,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 107,\n      columnNumber: 29\n    }\n  }), \" \\xA0\\xA0 C\\xE1ch th\\u1EE9c thanh to\\xE1n\"), /*#__PURE__*/React.createElement(\"p\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 108,\n      columnNumber: 25\n    }\n  }, \"* Qu\\xFD kh\\xE1ch vui l\\xF2ng \\u0111i\\u1EC1n \\u0111\\u1EA7y \\u0111\\u1EE7 th\\xF4ng tin shipping method, v\\xE0 ki\\u1EC3m tra th\\u1EADt k\\u0129 tr\\u01B0\\u1EDBc khi thanh to\\xE1n.\"), /*#__PURE__*/React.createElement(\"p\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 109,\n      columnNumber: 25\n    }\n  }, \"Hi\\u1EC7n t\\u1EA1i, Ch\\xFAng t\\xF4i h\\u1ED7 tr\\u1EE3 h\\xECnh th\\u1EE9c thanh to\\xE1n online th\\xF4ng qua \", /*#__PURE__*/React.createElement(\"span\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 109,\n      columnNumber: 93\n    }\n  }, \"Paypal.\"))), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"text\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 112,\n      columnNumber: 21\n    }\n  }, /*#__PURE__*/React.createElement(\"h4\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 113,\n      columnNumber: 25\n    }\n  }, /*#__PURE__*/React.createElement(\"img\", {\n    className: \"icon\",\n    src: CS2,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 113,\n      columnNumber: 29\n    }\n  }), \" \\xA0\\xA0 Ch\\xEDnh s\\xE1ch \\u0111\\u1ED5i tr\\u1EA3\"), /*#__PURE__*/React.createElement(\"p\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 114,\n      columnNumber: 25\n    }\n  }, /*#__PURE__*/React.createElement(\"span\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 114,\n      columnNumber: 28\n    }\n  }, \"Th\\u1EDDi gian giao h\\xE0ng:\"), \"\\xA0Trong v\\xF2ng 20 ng\\xE0y k\\u1EC3 t\\u1EEB ng\\xE0y thanh to\\xE1n. \"), /*#__PURE__*/React.createElement(\"p\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 115,\n      columnNumber: 25\n    }\n  }, \"* \\xA0Khi nh\\u1EADn h\\xE0ng qu\\xFD kh\\xE1ch vui l\\xF2ng ki\\u1EC3m tra k\\u0129 s\\u1EA3n ph\\u1EA9m, v\\u1EC1 nh\\xE3n s\\u1EA3n ph\\u1EA9m, m\\xE0u s\\u1EAFc, \\u0111\\u1ED9 b\\u1EC1n, n\\u1EBFu c\\xF3 sai s\\xF3t vui l\\xF2ng g\\u1EEDi s\\u1EA3n ph\\u1EA9m l\\u1EA1i cho shipper, v\\xE0 g\\u1ECDi v\\u1EC1 s\\u1ED1 \\u0111i\\u1EC7n tho\\u1EA1i: 0848071200 \\u0111\\u1EC3 \\u0111\\u01B0\\u1EE3c t\\u01B0 v\\u1EA5n. \"))), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"listcard\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 121,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"cartshipping\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 122,\n      columnNumber: 21\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    class: \"bagicon\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 123,\n      columnNumber: 25\n    }\n  }, /*#__PURE__*/React.createElement(\"img\", {\n    className: \"icon2\",\n    src: bag,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 124,\n      columnNumber: 29\n    }\n  }), /*#__PURE__*/React.createElement(\"p\", {\n    className: \"dollar\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 125,\n      columnNumber: 29\n    }\n  }, \"$\")), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"bill\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 127,\n      columnNumber: 25\n    }\n  }, cart.map(product => /*#__PURE__*/React.createElement(\"div\", {\n    className: \"billdetail\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 130,\n      columnNumber: 37\n    }\n  }, /*#__PURE__*/React.createElement(\"p\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 131,\n      columnNumber: 41\n    }\n  }, product.title), /*#__PURE__*/React.createElement(\"h4\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 132,\n      columnNumber: 41\n    }\n  }, \"$\", product.price * product.quantity)))), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"totalbill\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 137,\n      columnNumber: 25\n    }\n  }, /*#__PURE__*/React.createElement(\"h4\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 139,\n      columnNumber: 29\n    }\n  }, \"Total\"), /*#__PURE__*/React.createElement(\"p\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 140,\n      columnNumber: 29\n    }\n  }, \"$\", total))))), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"btncheckout\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 148,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"h3\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 149,\n      columnNumber: 17\n    }\n  }, \"For Payment:\"), /*#__PURE__*/React.createElement(PaypalButton, {\n    total: total / 2,\n    tranSuccess: tranSuccess,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 150,\n      columnNumber: 17\n    }\n  }), /*#__PURE__*/React.createElement(\"p\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 154,\n      columnNumber: 17\n    }\n  }, \"* S\\u1ED1  ti\\u1EC1n ph\\u1EA3i thanh to\\xE1n tr\\u01B0\\u1EDBc : $\", total / 2)), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"phonecall\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 156,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"p\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 157,\n      columnNumber: 17\n    }\n  }, \"To make an enquiry call \", /*#__PURE__*/React.createElement(\"span\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 157,\n      columnNumber: 44\n    }\n  }, \"+0848071200\"))), /*#__PURE__*/React.createElement(Footer, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 159,\n      columnNumber: 13\n    }\n  }));\n}\n\nexport default Checkout;","map":{"version":3,"sources":["/home/phuocnghia712/Desktop/Cshttt/client/src/components/checkout/checkout.js"],"names":["React","useContext","useState","useEffect","useLocation","useParams","GlobalState","PaypaylExpressBtn","PaypalButton","axios","Link","store","Footer","initialState","shipname","shipaddress","shipcity","shipstate","shipphone","Checkout","state","cart","setCart","userAPI","ship","setShip","total","setTotal","token","addToCart","patch","headers","Authorization","tranSuccess","payment","paymentID","address","pay","post","addNotification","title","message","type","insert","container","animationIn","animationOut","dismiss","duration","onScreen","window","location","href","getTotal","reduce","prev","item","price","quantity","onChangeInput","e","name","value","target","console","log","city","CS","CS2","bag","map","product"],"mappings":"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","sourcesContent":["import React, { useContext, useState, useEffect } from 'react'\nimport { useLocation, useParams } from 'react-router'\nimport { GlobalState } from '../../GlobalState'\nimport PaypaylExpressBtn from 'react-paypal-express-checkout'\nimport PaypalButton from '../mainpages/cart/PaypalButton'\nimport axios from 'axios'\nimport CS from '../../img/chinhsach.svg'\nimport payment from '../../img/payment.svg'\nimport CS2 from '../../img/insurance2.svg'\nimport bag from '../../img/bag.svg'\nimport { Link } from 'react-router-dom'\nimport left from '../../img/left.svg'\nimport { store } from 'react-notifications-component';\nimport Footer from '../footer/Footer'\nconst initialState = {\n    shipname: '',\n    shipaddress: '',\n    shipcity: '',\n    shipstate: '',\n    shipphone: ''\n}\nfunction Checkout() {\n\n    const state = useContext(GlobalState)\n    const [cart, setCart] = state.userAPI.cart\n    const [ship, setShip] = useState({ initialState })\n    const { shipname, shipaddress, shipcity, shipstate, shipphone } = ship\n    const [total, setTotal] = useState(0)\n    const [token] = state.token\n\n    const addToCart = async (cart) => {\n        await axios.patch('/user/addcart', { cart }, {\n            headers: { Authorization: token }\n        })\n    }\n    const tranSuccess = async (payment) => {\n        const { paymentID, address } = payment;\n        const pay = total / 2\n        await axios.post('/api/payment', { cart, paymentID, address, shipname, shipaddress, shipcity, shipstate, shipphone, pay, total }, {\n            headers: { Authorization: token }\n        })\n\n        setCart([])\n        addToCart([])\n\n\n        store.addNotification({\n            title: \"SuccessFul Payment!\",\n            message: \"Please check your history order!\",\n            type: \"success\",\n            insert: \"top\",\n            container: \"top-center\",\n            animationIn: [\"animate__animated\", \"animate__fadeIn\"],\n            animationOut: [\"animate__animated\", \"animate__fadeOut\"],\n            dismiss: {\n                duration: 2500,\n                onScreen: true\n            }\n        });\n        window.location.href = \"/history\"\n    }\n\n    //get total of cart\n    useEffect(() => {\n        const getTotal = () => {\n            const total = cart.reduce((prev, item) => {\n                return prev + (item.price * item.quantity)\n            }, 0)\n\n            setTotal(total)\n        }\n\n        getTotal()\n\n    }, [cart])\n\n    const onChangeInput = e => {\n        const { name, value } = e.target\n        setShip({ ...ship, [name]: value })\n        console.log(ship)\n    }\n    return (\n        <div className=\"checkout\">\n            <div className=\"inforcheckout\">\n                <div className=\"shipping\">\n                    <div className=\"shipform\">\n                        <h3>Shipping Address</h3>\n                        <input className=\"shipinfor\" id=\"shipinfor\" type=\"text\" name=\"shipname\" value={ship.shipname} onChange={onChangeInput} required placeholder=\"Reciver fullname\" />\n\n\n                        <input className=\"shipinfor\" type=\"text\" name=\"shipaddress\" value={ship.shipaddress} onChange={onChangeInput} required placeholder=\"Address\"></input>\n\n\n                        <input className=\"shipinfor\" type=\"text\" name=\"shipcity\" value={ship.city} onChange={onChangeInput} required placeholder=\"City\"></input>\n\n\n                        <input className=\"shipinfor\" type=\"text\" name=\"shipstate\" value={ship.shipstate} onChange={onChangeInput} required placeholder=\"State\"></input>\n\n\n                        <input className=\"shipinfor\" type=\"text\" name=\"shipphone\" value={ship.shipphone} onChange={onChangeInput} required placeholder=\"Reciver phonenumber\"></input>\n                    </div>\n                </div>\n                <div className=\"Confirm\">\n                    <img className=\"img\" src={CS} />\n                    <div className=\"text\">\n\n                        <h4><img className=\"icon\" src={payment} /> &nbsp;&nbsp; Cách thức thanh toán</h4>\n                        <p>* Quý khách vui lòng điền đầy đủ thông tin shipping method, và kiểm tra thật kĩ trước khi thanh toán.</p>\n                        <p>Hiện tại, Chúng tôi hỗ trợ hình thức thanh toán online thông qua <span>Paypal.</span></p>\n\n                    </div>\n                    <div className=\"text\">\n                        <h4><img className=\"icon\" src={CS2} /> &nbsp;&nbsp; Chính sách đổi trả</h4>\n                        <p><span>Thời gian giao hàng:</span>&nbsp;Trong vòng 20 ngày kể từ ngày thanh toán. </p>\n                        <p>* &nbsp;Khi nhận hàng quý khách vui lòng kiểm tra kĩ sản phẩm, về nhãn sản phẩm, màu sắc, độ bền, nếu có sai sót vui lòng gửi sản phẩm lại cho shipper, và gọi về số điện thoại: 0848071200 để được tư vấn. </p>\n\n                    </div>\n\n                </div>\n\n                <div className=\"listcard\">\n                    <div className=\"cartshipping\">\n                        <div class=\"bagicon\">\n                            <img className=\"icon2\" src={bag}></img>\n                            <p className=\"dollar\">$</p>\n                        </div>\n                        <div className=\"bill\">\n                            {\n                                cart.map(product => (\n                                    <div className=\"billdetail\">\n                                        <p>{product.title}</p>\n                                        <h4>${product.price * product.quantity}</h4>\n                                    </div>\n                                ))\n                            }\n                        </div>\n                        <div className=\"totalbill\">\n\n                            <h4>Total</h4>\n                            <p>${total}</p>\n                        </div>\n\n                    </div>\n\n                    {/* <Link className=\"btnreturn\" to=\"/cart\"><img className=\"icon3\" src={left} /> <span>Return to cart</span></Link> */}\n                </div>\n            </div>\n            <div className=\"btncheckout\">\n                <h3>For Payment:</h3>\n                <PaypalButton\n                    total={total / 2}\n                    tranSuccess={tranSuccess}\n                />\n                <p>* Số  tiền phải thanh toán trước : ${total / 2}</p>\n            </div>\n            <div className=\"phonecall\">\n                <p>To make an enquiry call <span>+0848071200</span></p>\n            </div>\n            <Footer/>\n        </div>\n    )\n}\n\nexport default Checkout"]},"metadata":{},"sourceType":"module"}